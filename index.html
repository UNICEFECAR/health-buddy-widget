<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="assets/css/chat.css" rel="stylesheet" />
<script src="assets/js/language.js"></script>
<script src="assets/js/bot.js"></script>
<div id="webchat" />
<script>
    function isMobile() {
        try {
            document.createEvent("TouchEvent");
            return true;
        } catch (e) {
            return false;
        }
    }
    var setButtonText = function () {
        const paragraph = document.createElement("p");
        document.getElementsByClassName("push-launcher")[0].appendChild(paragraph);
        document.getElementsByClassName("push-launcher")[0].getElementsByTagName("p")[0].innerText = buttonText;
    }
    var config = {
        selector: "#webchat",
        initPayload: initPayload,
        channelUuid: "f2cc9ec6-07f1-407a-8948-ece57761d88e",
        host: "https://rapidpro.ilhasoft.mobi",
        title: "HealthBuddy",
        inputTextFieldHint: inputText,
        profileAvatar: "./assets/img/chat-avatar.svg",
        disableTooltips: true,
        docViewer: true,
        showFullScreenButton: true,
        hideWhenNotConnected: true,
        params: {
            images: {
                dims: {
                    width: 712,
                    height: 844
                }
            },
            storage: "session"
        },
        onSocketEvent: {
            'connect': () => setTimeout(setButtonText, 1000)
        }
    }
    if (!isMobile()) {
        WebChat.default.init(config);
    } else {
        // Mobile view
        config.tooltipPayload = initPayload;
        config.disableTooltips = false;
        WebChat.default.init(config);
    }
</script>